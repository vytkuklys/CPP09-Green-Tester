#!/bin/bash

# Define color codes
RED='\033[0;31m'
LIGHTRED='\033[1;31m' # Bright Red
GREEN='\033[0;32m'
LIGHTGREEN='\033[1;32m'
NC='\033[0m' # No Color

run_test() {
    local input_sequence="$1"
    local expected_output="$2"

    # Run the program with the input sequence and capture its output
    local actual_output=$(./PmergeMe $input_sequence)

    # Check if the output contains "Error" and matches the expected output
    if [[ $expected_output == *"Error"* ]]; then
        if [[ $actual_output == *"Error"* ]]; then
            echo -e "${LIGHTGREEN}Test passed: ${GREEN} $input_sequence"
        else
            echo -e "${LIGHTRED}Test failed: ${RED} $input_sequence"
            echo "Expected:"
            echo -e "$expected_output"
            echo "Got:"
            echo -e "$actual_output${NC}"
        fi
    else
        # Remove the "After: " part from the expected output
        expected_output=$(echo "$expected_output" | sed 's/After: //')

        # Check if the output contains "Before: " followed by the input sequence
        if [[ $actual_output == *"Before: $input_sequence"* ]]; then
            # Extract the ordered sequence from the output
            local ordered_sequence=$(echo "$actual_output" | awk '/After: /{print $NF}')
            
            # Check if the output contains "After: " followed by the expected ordered sequence
            if [[ $actual_output == *"After: $expected_output"* ]]; then
                echo -e "${LIGHTGREEN}Test passed: ${GREEN} $input_sequence"
            else
                echo -e "${LIGHTRED}Test failed: ${RED} $input_sequence"
                echo -e "\n\n\n$actual_output"
            fi
        else
            echo -e "${LIGHTRED}Test failed: ${RED} $input_sequence"
            echo -e "\n\n\n$actual_output"
        fi
    fi
}

# Define test cases
test_case1=("1 3 2 5 4 a" "Error")
test_case2=("1 3 2 -5 4" "Error")
test_case4=("1 3 2 5 4" "1 2 3 4 5")
test_case5=("2 3 1 5 4" "1 2 3 4 5")
test_case6=("5 3 1 2 4" "1 2 3 4 5")
test_case7=("5 3 1 2 4 11 23 21 0 7 8 9" "0 1 2 3 4 5 7 8 9 11 21 23")
test_case8=("5 3 1 2 4 0 99 88 33 22 11" "0 1 2 3 4 5 11 22 33 88 99")
test_case9=("980 652 297 424 388 466 687 409 386 161 905 784 198 619 438 844 552 554 445 893 867 541 261 80 22 953 420 978 131 457 363 542 957 649 930 664 582 604 28 460 366 494 38 139 285 594 715 206 158 504 925 693 942 260 89 318 375 813 897 960 519 805 677 720 640 278 347 939 666 476 758 316 470 280 128 11 152 241 638 416 109 631 733 549 222 994 836 788 759 794 310 307 808 509 679 355 951 210 653 219 506 900 415 440 819 323 428 411 371 4 929 419 207 864 439 940 50 334 829 550 83 777 510 609 195 555 227 601 26 432 155 908 390 944 221 622 148 965 946 714 665 125 1 35 518 47 591 398 199 82 531 277 605 164 202 740 96 559 179 686 644 828 247 272 180 780 719 667 484 851 918 60 163 650 712 343 362 451 300 827 382 454 384 42 229 488 748 926 150 738 287 624 69 732 61 151 296 238 645 584 63 886 436 579 834 618 855 447 213 883 113 932 497 901 21 403 814 699 378 29 751 426 954 230 137 963 361 734 188 146 281 135 934 702 746 810 240 802 185 642 270 670 896 291 99 937 992 527 948 887 242 879 655 298 236 729 324 576 458 592 857 266 985 791 217 321 981 947 138 90 81 233 88 174 141 593 348 209 17 757 615 253 372 556 495 85 865 313 868 489 31 741 25 162 562 500 730 214 566 201 20 354 945 30 706 799 40 806 126 737 825 469 97 283 846 983 763 304 393 215 725 672 118 299 27 596 831 974 914 511 160 623 105 159 13 620 505 94 58 524 862 394 498 743 832 692 775 512 671 317 817 68 537 561 843 467 153 156 783 975 408 7 533 167 536 491 263 997 535 876 796 258 735 681 413 91 431 422 616 726 869 130 595 142 745 224 716 961 569 112 854 144 452 674 728 34 262 705 116 873 228 226 786 115 507 890 446 328 987 487 906 866 656 346 754 3 795 370 882 611 36 369 246 789 288 769 571 970 912 722 468 268 111 979 78 572 8 344 833 407 709 927 465 608 999 248 103 859 648 711 516 588 694 6 532 449 442 464 878 110 603 496 376 101 573 986 651 32 77 352 204 235 689 545 190 684 76 707 812 24 249 72 114 646 49 295 636 292 515 200 95 136 154 870 184 453 212 849 658 433 418 259 977 597 274 455 203 874 669 793 45 173 350 66 322 39 73 520 12 840 923 218 503 959 635 290 568 935 996 251 9 772 798 373 48 924 119 770 598 654 850 967 481 414 673 781 747 2 5 760 335 936 875 399 493 429 613 284 389 755 499 736 803 308 383 680 580 123 381 724 860 145 621 697 186 993 183 434 915 244 602 824 250 46 397 351 53 421 65 102 120 931 472 480 79 525 289 237 894 998 197 920 972 543 950 276 450 913 368 675 768 841 583 267 461 540 938 256 165 529 255 502 885 547 587 630 364 809 43 880 839 822 57 830 816 437 59 933 107 534 282 404 392 688 459 560 157 271 473 964 367 140 600 995 121 881 625 406 682 482 826 683 37 610 614 718 243 303 717 312 767 64 286 811 62 264 448 971 239 395 44 785 254 379 340 171 904 949 477 976 578 342 387 744 943" "1 2 3 4 5 6 7 8 9 11 12 13 17 20 21 22 24 25 26 27 28 29 30 31 32 34 35 36 37 38 39 40 42 43 44 45 46 47 48 49 50 53 57 58 59 60 61 62 63 64 65 66 68 69 72 73 76 77 78 79 80 81 82 83 85 88 89 90 91 94 95 96 97 99 101 102 103 105 107 109 110 111 112 113 114 115 116 118 119 120 121 123 125 126 128 130 131 135 136 137 138 139 140 141 142 144 145 146 148 150 151 152 153 154 155 156 157 158 159 160 161 162 163 164 165 167 171 173 174 179 180 183 184 185 186 188 190 195 197 198 199 200 201 202 203 204 206 207 209 210 212 213 214 215 217 218 219 221 222 224 226 227 228 229 230 233 235 236 237 238 239 240 241 242 243 244 246 247 248 249 250 251 253 254 255 256 258 259 260 261 262 263 264 266 267 268 270 271 272 274 276 277 278 280 281 282 283 284 285 286 287 288 289 290 291 292 295 296 297 298 299 300 303 304 307 308 310 312 313 316 317 318 321 322 323 324 328 334 335 340 342 343 344 346 347 348 350 351 352 354 355 361 362 363 364 366 367 368 369 370 371 372 373 375 376 378 379 381 382 383 384 386 387 388 389 390 392 393 394 395 397 398 399 403 404 406 407 408 409 411 413 414 415 416 418 419 420 421 422 424 426 428 429 431 432 433 434 436 437 438 439 440 442 445 446 447 448 449 450 451 452 453 454 455 457 458 459 460 461 464 465 466 467 468 469 470 472 473 476 477 480 481 482 484 487 488 489 491 493 494 495 496 497 498 499 500 502 503 504 505 506 507 509 510 511 512 515 516 518 519 520 524 525 527 529 531 532 533 534 535 536 537 540 541 542 543 545 547 549 550 552 554 555 556 559 560 561 562 566 568 569 571 572 573 576 578 579 580 582 583 584 587 588 591 592 593 594 595 596 597 598 600 601 602 603 604 605 608 609 610 611 613 614 615 616 618 619 620 621 622 623 624 625 630 631 635 636 638 640 642 644 645 646 648 649 650 651 652 653 654 655 656 658 664 665 666 667 669 670 671 672 673 674 675 677 679 680 681 682 683 684 686 687 688 689 692 693 694 697 699 702 705 706 707 709 711 712 714 715 716 717 718 719 720 722 724 725 726 728 729 730 732 733 734 735 736 737 738 740 741 743 744 745 746 747 748 751 754 755 757 758 759 760 763 767 768 769 770 772 775 777 780 781 783 784 785 786 788 789 791 793 794 795 796 798 799 802 803 805 806 808 809 810 811 812 813 814 816 817 819 822 824 825 826 827 828 829 830 831 832 833 834 836 839 840 841 843 844 846 849 850 851 854 855 857 859 860 862 864 865 866 867 868 869 870 873 874 875 876 878 879 880 881 882 883 885 886 887 890 893 894 896 897 900 901 904 905 906 908 912 913 914 915 918 920 923 924 925 926 927 929 930 931 932 933 934 935 936 937 938 939 940 942 943 944 945 946 947 948 949 950 951 953 954 957 959 960 961 963 964 965 967 970 971 972 974 975 976 977 978 979 980 981 983 985 986 987 992 993 994 995 996 997 998 999")
# Run the test cases
run_test "${test_case1[0]}" "${test_case1[1]}"
run_test "${test_case2[0]}" "${test_case2[1]}"
run_test "${test_case4[0]}" "${test_case4[1]}"
run_test "${test_case5[0]}" "${test_case5[1]}"
run_test "${test_case6[0]}" "${test_case6[1]}"
run_test "${test_case7[0]}" "${test_case7[1]}"
run_test "${test_case8[0]}" "${test_case8[1]}"
run_test "${test_case9[0]}" "${test_case9[1]}"
